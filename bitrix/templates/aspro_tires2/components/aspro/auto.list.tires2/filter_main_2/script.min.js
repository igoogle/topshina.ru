$(document).ready(function(){$(document).on("change","select.cars-list",function(){var r=$(this).closest(".car_list_wrap");$.ajax({url:arTires2Options.SITE_DIR+"ajax/car_list.php",type:"POST",data:{template:obConfigTyreIndex.template,type_filter:r.find('input[name="type_filter"]').val(),car:r.find("select.car").val(),model:r.find("select.model").val(),year:r.find("select.year").val(),modification:r.find("select.modification").val(),VYLET_DISKA_TYPE:obConfigTyreIndex.et_type,VYLET_DISKA_RANGE_MIN:obConfigTyreIndex.et_range0,VYLET_DISKA_RANGE_MAX:obConfigTyreIndex.et_range1,DIAMETR_STUPITSY_TYPE:obConfigTyreIndex.dia_type,DIAMETR_STUPITSY_RANGE_MIN:obConfigTyreIndex.dia_range0,DIAMETR_STUPITSY_RANGE_MAX:obConfigTyreIndex.dia_range1}}).done(function(e){BX(r[0]).innerHTML=e;var t=r.find(".filter_result").html(),a=r.find('input[name="type_filter"]').val();$("#filter_result").length&&$("#filter_result").removeClass("loadings bg"),"tires"==a?$("#filter_result .tyres_result").html(t):"wheels"==a?$("#filter_result .wheels_result").html(t):"akb"==a&&$("#filter_result .akb_result").html(t),$(".car_list_wrap .filter_result").length&&$("#filter_result").addClass("showen"),$(".filter_result").length||$("#filter_result").removeClass("showen"),$(".front_filter_wrap").each(function(){var e=$(this).find('input[name="type_filter"]').val();$(this).find(".filter_result").length||("tires"==e?$("#filter_result .tyres_result").html(""):"wheels"==e&&$("#filter_result .wheels_result").html(""))}),initSelects(document)})}),$(document).on("change",".filter_result input.cars-list",function(){var e=$(this);setTimeout(function(){e.closest(".front_filter_wrap").find(".tyres_params").closest("form").find("input[type=submit]").click()},100),$("#filter_result").length&&$("#filter_result").addClass("loadings bg")}),$(document).on("change",'input[type="radio"].cars-list',function(){var e=$("input[data-id=filter_name]").val(),t=$(".bx_filter_parameters_box[data-tyreindex=twidth]").data("property_id"),a=$(".bx_filter_parameters_box[data-tyreindex=theight]").data("property_id"),r=$(".bx_filter_parameters_box[data-tyreindex=tdia]").data("property_id"),i=$(".bx_filter_parameters_box[data-tyreindex=ddia]").data("property_id"),d=$(".bx_filter_parameters_box[data-tyreindex=dmbr]").data("property_id"),l=$(".bx_filter_parameters_box[data-tyreindex=dco]").data("property_id"),_=$(".bx_filter_parameters_box[data-tyreindex=dvd]").data("property_id"),s=$(".bx_filter_parameters_box[data-tyreindex=dds]").data("property_id"),n=$(".bx_filter_parameters_box[data-tyreindex=alen]").data("property_id"),o=$(".bx_filter_parameters_box[data-tyreindex=awidth]").data("property_id"),p=$(".bx_filter_parameters_box[data-tyreindex=aheight]").data("property_id"),f=$(".bx_filter_parameters_box[data-tyreindex=atype]").data("property_id"),x=$(".bx_filter_parameters_box[data-tyreindex=apolarity]").data("property_id"),y=$(".bx_filter_parameters_box[data-tyreindex=acapacity]").data("property_id"),h=$(".bx_filter_parameters_box[data-tyreindex=avolume]").data("property_id"),b=$(".bx_filter_parameters_box[data-tyreindex=dwidth]").data("property_id"),u=filter_height=filter_dia=filter_dwidth=filter_dco=filter_dmbr=filter_apolarity=filter_atype=filter_dds=filter_ddia="",m=[],c=$(this),g=[];if(c.parent().hasClass("tires")&&(u=e+"_"+t+"_"+$(this).attr("data-w"),filter_height=e+"_"+a+"_"+$(this).attr("data-h"),filter_dia=e+"_"+r+"_"+$(this).attr("data-d")),c.parent().hasClass("wheels")&&(filter_dwidth=e+"_"+b+"_"+$(this).attr("data-w"),filter_dco=e+"_"+l+"_"+$(this).attr("data-lz"),filter_dmbr=e+"_"+d+"_"+$(this).attr("data-pcd"),filter_dds=e+"_"+s+"_"+1*$(this).attr("data-dia"),filter_ddia=e+"_"+i+"_"+$(this).attr("data-d")),c.parent().hasClass("akb")&&(filter_apolarity=e+"_"+x+"_"+$(this).attr("data-apolarity"),filter_atype=e+"_"+f+"_"+$(this).attr("data-atype")),t&&u&&m.push({key:t,tyreindex:"twidth",id:u}),a&&filter_height&&m.push({key:a,tyreindex:"theight",id:filter_height}),r&&filter_dia&&m.push({key:r,tyreindex:"tdia",id:filter_dia}),i&&filter_ddia&&m.push({key:i,tyreindex:"ddia",id:filter_ddia}),b&&filter_dwidth&&m.push({key:b,tyreindex:"dwidth",id:filter_dwidth}),l&&filter_dco&&m.push({key:l,tyreindex:"dco",id:filter_dco}),d&&filter_dmbr&&m.push({key:d,tyreindex:"dmbr",id:filter_dmbr}),x&&filter_apolarity&&m.push({key:x,tyreindex:"apolarity",id:filter_apolarity}),f&&filter_atype&&m.push({key:f,tyreindex:"atype",id:filter_atype}),m)for(var v in m)$(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] input").removeAttr("checked"),$(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] input[id="+m[v].id+"]").prop("checked","checked").removeClass("disabled").removeAttr("disabled"),$(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] input[data-ti_id="+m[v].id+"]").prop("checked","checked").removeClass("disabled").removeAttr("disabled"),$(".bx_filter_select_popup").length&&($(".bx_filter_select_popup label[for="+m[v].id+"]").length?($("#smartFilterDropDown"+m[v].key).length&&$("#smartFilterDropDown"+m[v].key+" label").removeClass("selected"),$(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] .bx_filter_select_popup label").removeClass("selected"),$(".bx_filter_select_popup label[for="+m[v].id+"]").addClass("selected"),$(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] .bx_filter_select_text").text($(".bx_filter_select_popup label[for="+m[v].id+"]").text())):$("#smartFilterDropDown"+m[v].key).length?($("#smartFilterDropDown"+m[v].key+" label").removeClass("selected"),$(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] .bx_filter_select_text").text($("#smartFilterDropDown"+m[v].key+" ul li:first label").text())):($(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] .bx_filter_select_popup label").removeClass("selected"),$(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] .bx_filter_select_text").text($(".bx_filter_parameters_box[data-tyreindex="+m[v].tyreindex+"] .bx_filter_select_popup ul li:first label").text())));if(s&&g.push({key:s,value:"data-dia",range0:obConfigTyreIndex.dia_range0,range1:obConfigTyreIndex.dia_range1}),_&&g.push({key:_,value:"data-et",range0:obConfigTyreIndex.et_range0,range1:obConfigTyreIndex.et_range1}),n&&g.push({key:n,value1:"data-alen_from",value2:"data-alen_to"}),o&&g.push({key:o,value1:"data-awidth_from",value2:"data-awidth_to"}),p&&g.push({key:p,value1:"data-aheight_from",value2:"data-aheight_to"}),y&&g.push({key:y,value1:"data-acapacity_from",value2:"data-acapacity_to"}),h&&g.push({key:h,value1:"data-avolume_from",value2:"data-avolume_to"}),g)for(var v in g){if("value1"in g[v]&&"value2"in g[v])var k=parseFloat($(this).attr(g[v].value1)),w=parseFloat($(this).attr(g[v].value2)),T=$(".bx_filter_parameters_box[data-property_id="+g[v].key+"]"),C=parseFloat(T.find(".min-price").attr("placeholder"))<=k?k:"",I=w<=parseFloat(T.find(".max-price").attr("placeholder"))?w:"";else{var F=parseFloat($(this).attr(g[v].value)),D=parseFloat(g[v].range0),A=parseFloat(g[v].range1);T=$(".bx_filter_parameters_box[data-property_id="+g[v].key+"]"),C=parseFloat(T.find(".min-price").attr("placeholder"))<=F-D?F-D:"",I=F+A<=parseFloat(T.find(".max-price").attr("placeholder"))?F+A:""}T.find(".min-price").length&&T.find(".min-price").val(C.toString().length?parseFloat(C.toFixed(1)):""),T.find(".max-price").length&&T.find(".max-price").val(I.toString().length?parseFloat(I.toFixed(1)):""),window["trackBar"+g[v].key],window["trackBar"+g[v].key].onInputChange()}})});